<p class="text-center w-full bg-black text-white">次の目的地はこちら</p>
<div class="flex flex-col items-center px-5 py-8 h-screen mx-auto max-w-7xl sm:px-6 lg:px-8">
  <div class="flex flex-col w-full max-w-3xl mx-auto text-center prose text-left prose-blue">
    <div class="w-full mx-auto">
      <h1 class="my-36 text-xl md:text-3xl font-normal">あなたにぴったりな建築をセレクトしました</h1>
      <div class="bg-white p-6 rounded-md">
        <% @matched_architecture.each_with_index do |architecture, idx| %>
          <p class="my-12 text-base md:text-lg"><%= idx + 1 %>. <%= architecture.name %></p>
        <% end %>
      </div>
      <h2 class="mt-36 text-xl md:text-3xl font-normal">詳細はこちら↓↓↓</h2>
    </div>
  </div>
</div>

<% @matched_architecture.each do |architecture| %>
  <% if architecture.present? %>
    <div class="flex flex-col md:flex-row items-end">
      <div class="w-full md:w-3/4 h-96 md:h-screen relative">
        <% if architecture.images.any? %>
          <%= image_tag architecture.images.first.url, class: 'image absolute inset-0 object-cover object-top h-full w-full' %>
        <% else %>
          <%= image_tag 'architecture_placeholder.png', class: 'absolute inset-0 object-cover object-top h-full w-full' %>
        <% end %>
        <div class="progress-bar h-1 bg-second absolute top-0 left-0 ease-in-out duration-300"></div>
        <div class="description hidden absolute inset-0 bg-black bg-opacity-50 text-white p-4 tracking-widest">
          <button class="close-btn absolute top-2 right-2 p-2 text-xl text-white">
            <span class="fa-stack hover:scale-110">
              <i class="fas fa-circle fa-stack-2x text-white fa-stack-2x"></i>
              <i class="fa-solid fa-xmark text-theme text-2xl fa-stack-1x pt-1"></i>
            </span>
          </button>
          <div class="flex flex-col justify-center items-center h-full">
            <div class="max-w-2xl sm:mt-12 mt-6">
              <p><%= safe_join(architecture.description.split("\n"), tag(:br)) %></p>
              <br>
              <% if architecture.architect.present? %>
                <p><%= Architecture.human_attribute_name(:architect) %> : <%= architecture.architect %></p>
              <% end %>
              <br>
              <% architecture.tags.each do |tag| %>
                <a>#<%= tag.name %> </a>
              <% end %>
            </div>
          </div>
        </div>
        <button class="toggle-btn absolute top-0 right-0 p-4 text-xl">
          <span class="fa-stack hover:scale-110">
            <i class="fas fa-circle fa-stack-2x text-white fa-stack-2x"></i>
            <i class="fa-solid fa-book-open-reader text-theme text-2xl fa-stack-1x pt-1"></i>
          </span>
        </button>
      </div>
      <div class="w-full md:w-144 px-4 md:pt-0 pt-4">
        <h1 class="text-3xl md:text-5xl mb-4"><%= architecture.name %></h1>
        <div class="relative my-8 mb-20">
          <p><%= simple_format(architecture.location) %></p>
          <div class="flex items-center pt-2">
            <i class="fa-sharp fa-solid fa-location-dot"></i>
            <p class="px-2">距離 28km</p>
          </div>
          <div class="pt-4">
            <% if logged_in? %>
              <% if current_user.like?(architecture) %>
                <input value="Like済み" type="submit" disabled class="w-full text-black border border-black rounded-full mb-4">
              <% else %>
                <%= button_to 'Like', likes_path(architecture_id: architecture.id), method: :post, class: 'w-full bg-second text-black rounded-full mb-4 hover:scale-105 hover:drop-shadow-lg', id: 'like-button' %>
              <% end %>
            <% else %>
              <button id="modalOpen" class="button w-full bg-second text-black mb-4 rounded-full hover:scale-105 hover:drop-shadow-lg">Like</button>
              <div id="easyModal" class="hidden flex fixed top-0 left-0 h-full w-full overflow-auto bg-black bg-opacity-50">
                <div class="relative mx-auto my-auto w-2/3 md:w-1/2">
                  <h1 class="text-xl text-center text-white mb-6">Likeするにはログインが必要です</h1>
                  <%= link_to (t 'user_sessions.new.title'), login_path, class: "absolute w-full bg-black text-white text-center rounded-full mb-4 hover:scale-105 hover:drop-shadow-lg" %>
                </div>
              </div>
            <% end %>
          </div>
        </div>
      </div>
    </div>
  <% else %>
    <p><%= t('.no_result') %></p>
  <% end %>
<% end %>